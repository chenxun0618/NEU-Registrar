<div class="container">
    <h1 class="margin-bottom-20">
        Semester Course Offerings—Office of the Registrar
    </h1>

    <div ng-if="model.error" class="alert alert-danger error-box">{{model.error}}</div>

    <span ng-show="model.schedule" class="search-box">
        <input style="float: right" type="text" id="filterText" ng-model="filterText"
               placeholder="Search a class number, class name...">
    </span>
    <br>
    <form name="getSchedules">
        <label for="scheduleSelect"> Schedule: </label>
        <select name="scheduleSelect" id="scheduleSelect" ng-model="model.selectedSchedule"
                ng-options="model.getScheduleSummaryLine(option) for option in model.schedules track by option.departmentCode+option.term"
                ng-change="model.getScheduleDetail(model.selectedSchedule)">
        </select>
    </form>
    <table ng-show="model.schedule" class="table">
        <thead>
        <tr>
            <th>Course No.</th>
            <th>Title</th>
            <th>Meeting Time</th>
            <th></th>
        </tr>
        </thead>

        <tbody>
        <tr ng-class="{'added': (class.metadata && class.metadata.added), 'deleted': (class.metadata && !class.metadata.added && class.metadata.deleted), 'modified': (class.metadata && !class.metadata.deleted && !class.metadata.added && class.metadata.modified)}"
            ng-repeat="class in model.schedule | filterClass:filterText">
            <td>{{class.subjectCode}} {{class.courseNumber}}</td>
            <td>{{class.shortTitle}}</td>
            <td>{{class.meetingDays}} {{class.meetingStart.slice(0, class.meetingStart.length -
                3)}}:{{class.meetingStart.slice(class.meetingStart.length - 2)}}–{{class.meetingEnd.slice(0,
                class.meetingEnd.length - 3)}}:{{class.meetingEnd.slice(class.meetingEnd.length - 2)}}
            </td>
            <td>
                <a ng-click="model.navigateToClassDetail(class.metadata.unique_id)">{{model.loggedInUser.admin ? "View"
                    : "Edit"}}</a>
            </td>
        </tr>
        </tbody>
    </table>

    <div ng-show="model.schedule" class="color-legend">
        <div class="color-legend-item">
            <div class="color-box added"/>
            <div class="text-box">Added</div>
        </div>
        <div class="color-legend-item">
            <div class="color-box modified"/>
            <div class="text-box">Modified</div>
        </div>
        <div class="color-legend-item">
            <div class="color-box deleted"/>
            <div class="text-box">Cancelled</div>
        </div>
        <div class="color-legend-item">
            <div class="color-box unmodified"/>
            <div class="text-box">Unmodified</div>
        </div>
    </div>

    <div class="float-right">
        <button ng-click="model.navigateToAddClass()" ng-show="model.schedule && !model.loggedInUser.admin"
                type="button" class="btn btn-info">Add
            Class
        </button>
        <button ng-click="model.saveSchedule()" ng-show="model.schedule && !model.loggedInUser.admin" type="button"
                class="btn btn-success">
            Save
        </button>
        <button ng-click="model.submitSchedule()" ng-show="model.schedule && !model.loggedInUser.admin" type="button"
                class="btn btn-primary">
            Submit
        </button>
        <button ng-click="model.rejectSchedule()" ng-show="model.schedule && model.loggedInUser.admin" type="button"
                class="btn btn-danger">
            Reject
        </button>
        <button ng-click="model.approveSchedule()" ng-show="model.schedule && model.loggedInUser.admin" type="button"
                class="btn btn-success">
            Approve
        </button>
    </div>
</div>
