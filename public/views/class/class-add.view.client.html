<script type="text/javascript">
    $('select.select2').select2();
</script>

<div class="container">
    <h1 class="margin-bottom-20">
        Add Class
    </h1>

    <div ng-if="model.error" class="alert alert-danger error-box">{{model.error}}</div>

    <table class="table narrow">
        <tbody>
        <tr>
            <td>Subject Code</td>
            <td>
                <select class="select2" ng-model="model.selectedSubjectCode">
                    <option ng-repeat="option in model.allSubjectCodes">{{option}}</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Course Number</td>
            <td>
                <input id="courseNumber" ng-model="model.selectedCourseNumber" maxlength="4" type="text"/>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <button type="button" class="btn btn-success"
                        ng-click="model.getCourseDataFromCatalog(model.selectedSubjectCode, model.selectedCourseNumber)">
                    Load Catalog Data
                </button>
            </td>
        </tr>
        </tbody>
    </table>

    <table ng-show="model.class" class="table narrow">
        <tbody>
        <tr>
            <td>Course</td>
            <td>{{model.class.subjectCode}} {{model.class.courseNumber}}</td>
        </tr>
        <tr>
            <td>Section</td>
            <td>{{model.class.section}}</td>
        </tr>
        <tr>
            <td>CRN</td>
            <td class="changedFrom">(to be generated)</td>
        </tr>
        <tr>
            <td>Title*</td>
            <td>
                <input ng-model="model.class.shortTitle"></input>
            </td>
        </tr>
        <tr>
            <td>Meeting Times*</td>
            <td>
                <select ng-model="model.class.meetingDays"
                        ng-options="option for option in model.allMeetingDays"
                        ng-change="model.updateOnChangeOfTime(0)">
                </select>

                <select ng-model="model.class.meetingStart"
                        ng-options="option for option in model.allMeetingStartTimes"
                        ng-change="model.updateOnChangeOfTime(1)">
                </select>
                â€”
                <select ng-model="model.class.meetingEnd"
                        ng-options="option for option in model.allMeetingEndTimes"
                        ng-change="model.updateOnChangeOfTime(0)">
                </select>
            </td>
        </tr>
        <tr>
            <td>Primary Instructor*</td>
            <td>
                <select class="select2" ng-model="model.class.primaryInstructor">
                    <option ng-repeat="option in model.allPrimaryInstructors track by option.nuid"
                            ng-value="option.nuid">{{option.nuid}} {{option.name}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
        <tr>
            <td>Secondary Instructors</td>
            <td>
                <select class="select2" ng-model="model.class.secondaryInstructors" multiple="multiple">
                    <option ng-repeat="option in model.allSecondaryInstructors" ng-value="option.nuid">{{option.nuid}}
                        {{option.name}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Enrollment Maximum*</td>
            <td>
                <input type="number" min="1" step="1" ng-model="model.class.enrollmentMax"/>
            </td>
        </tr>
        <tr>
            <td>Waitlist Capacity*</td>
            <td>
                <input ng-model="model.class.waitlistCapacity" type="number" min="1" step="1"/>
            </td>
        </tr>
        <tr>
            <td>Campus*</td>
            <td>
                <select ng-model="model.class.campus" ng-options="option for option in model.allCampuses">
                </select>
            </td>
        </tr>
        <tr>
            <td>Instructional Method*</td>
            <td>
                <select ng-model="model.class.instructionalMethod"
                        ng-options="option for option in model.allInstructionalMethods">
                </select>
            </td>
        </tr>
        <tr>
            <td>Special Approvals*</td>
            <td>
                <select ng-model="model.class.specialApprovals"
                        ng-options="option for option in model.allSpecialApprovals">
                </select>
            </td>
        </tr>
        <tr>
            <td>Major Restrictions</td>
            <td>
                <label class="margin-right-10">
                    <input type="radio" ng-model="model.class.includeMajorRestrictions" ng-value="!!model">
                    Include
                </label>
                <label>
                    <input type="radio" ng-model="model.class.includeMajorRestrictions" ng-value="!model">
                    Exclude
                </label><br/>
                <select class="select2" ng-model="model.class.majorRestrictions" multiple="multiple">
                    <option ng-repeat="option in model.allRestrictions.majorRestrictions" ng-value="option.majorCode">
                        {{option.majorCode + " " + option.majorDescription}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Class Restrictions</td>
            <td>
                <label class="margin-right-10">
                    <input type="radio" ng-model="model.class.includeClassRestrictions" ng-value="!!model">
                    Include
                </label>
                <label>
                    <input type="radio" ng-model="model.class.includeClassRestrictions" ng-value="!model">
                    Exclude
                </label><br/>
                <select class="select2" ng-model="model.class.classRestrictions" multiple="multiple">
                    <option ng-repeat="option in model.allRestrictions.classRestrictions" ng-value="option.classCode">
                        {{option.classCode + " " + option.classDescription}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Level Restrictions</td>
            <td>
                <label class="margin-right-10">
                    <input type="radio" ng-model="model.class.includeLevelRestrictions" ng-value="!!model">
                    Include
                </label>
                <label>
                    <input type="radio" ng-model="model.class.includeLevelRestrictions" ng-value="!model">
                    Exclude
                </label><br/>
                <select class="select2" ng-model="model.class.levelRestrictions" multiple="multiple">
                    <option ng-repeat="option in model.allRestrictions.levelRestrictions" ng-value="option.levelCode">
                        {{option.levelCode + " " + option.levelDescription}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Program Restrictions</td>
            <td>
                <label class="margin-right-10">
                    <input type="radio" ng-model="model.class.includeProgramRestrictions" ng-value="!!model">
                    Include
                </label>
                <label>
                    <input type="radio" ng-model="model.class.includeProgramRestrictions" ng-value="!model">
                    Exclude
                </label><br/>
                <select class="select2" ng-model="model.class.programRestrictions" multiple="multiple">
                    <option ng-repeat="option in model.allRestrictions.programRestrictions" ng-value="option.programCode">
                        {{option.programCode + " " + option.programDescription}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>College Restrictions</td>
            <td>
                <label class="margin-right-10">
                    <input type="radio" ng-model="model.class.includeCollegeRestrictions" ng-value="!!model">
                    Include
                </label>
                <label>
                    <input type="radio" ng-model="model.class.includeCollegeRestrictions" ng-value="!model">
                    Exclude
                </label><br/>
                <select class="select2" ng-model="model.class.collegeRestrictions" multiple="multiple">
                    <option ng-repeat="option in model.allRestrictions.collegeRestrictions" ng-value="option.collegeCode">
                        {{option.collegeCode + " " + option.collegeDescription}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Billing Attributes</td>
            <td>
                <select class="select2" ng-model="model.class.billingAttributes" multiple="multiple">
                    <option ng-repeat="option in model.allBillingAttributes" ng-value="option.billingAttributeCode">
                        {{option.billingAttributeCode + " " + option.billingAttributeDescription}}
                    </option>
                </select>
            </td>
        </tr>
        <tr>
            <td>Honors</td>
            <td>
                <select ng-model="model.class.honors" ng-options="option for option in model.yesOrNo">
                </select>
            </td>
        </tr>
        <tr>
            <td>Hide on Banner Schedule?</td>
            <td>
                <select ng-model="model.class.doNotPublish" ng-options="option for option in model.yesOrNo">
                </select>
            </td>
        </tr>
        <tr>
            <td>Cancel Class?</td>
            <td>
                <select ng-model="model.class.cancel" ng-options="option for option in model.yesOrNo">
                </select>
            </td>
        </tr>
        <tr>
            <td>Comment</td>
            <td>
                <textarea ng-model="model.class.comment"/>
            </td>
        </tr>
        </tbody>
    </table>
    <div id="toast" ng-click="model.toastMessage(0)">
        Time selected is during peak hours <b>MWR 9:15-15:25, TF 9:50-15:25</b>, please proceed with caution.
    </div>
    <div ng-if="model.class">
        <button ng-click="model.saveAndReturnToSchedule()" type="button" class="btn btn-primary">Add to Schedule
        </button>
        <button ng-click="model.returnToSchedule()" type="button" class="btn btn-warning">Cancel</button>
    </div>
</div>
